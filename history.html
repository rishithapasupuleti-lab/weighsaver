<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="historyTitle">Device History - WeighSaver</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1 data-i18n="brand">WeighSaver</h1>
  <nav>
    <a href="index.html" data-i18n="home">Home</a>
    <a href="history.html" data-i18n="history">History</a>
    <a href="about.html" data-i18n="about">About</a>
    <a href="contact.html" data-i18n="contact">Contact</a>
    <a href="help.html" data-i18n="help">Help</a>
  </nav>
</header>

<main>
  <div class="history-container" id="history">
    <h2 data-i18n="loadingHistory">Loading device data...</h2>
  </div>
</main>

<footer data-i18n="footer">
  &copy; 2025 WeighSaver | All rights reserved
</footer>

<script src="translations.js"></script>
<script src="script.js"></script>
<script>
  // Mock data
  const mockData = {
    "12345": {
      status: "Active",
      lastCheck: "2025-09-20",
      tamperEvents: [
        { date: "2025-09-01", type: "Circuit Change", location: "Hyderabad" },
        { date: "2025-08-15", type: "Magnetic Tamper", location: "Vijayawada" }
      ]
    },
    "67890": {
      status: "Inactive",
      lastCheck: "2025-09-10",
      tamperEvents: []
    }
  };

  const params = new URLSearchParams(window.location.search);
  const deviceId = params.get("deviceId");
  const container = document.getElementById("history");

  if (deviceId && mockData[deviceId]) {
    const data = mockData[deviceId];
    let html = `
      <h2 data-i18n="historyFor">History for Device ID: ${deviceId}</h2>
      <p><b data-i18n="status">Status:</b> ${data.status}</p>
      <p><b data-i18n="lastChecked">Last Checked:</b> ${data.lastCheck}</p>
      <h3 data-i18n="tamperEvents">Tamper Events:</h3>
    `;
    if (data.tamperEvents.length > 0) {
      data.tamperEvents.forEach(e => {
        html += `
          <div class="event">
            <p><strong data-i18n="eventDate">Date:</strong> ${e.date}</p>
            <p><strong data-i18n="eventType">Type:</strong> ${e.type}</p>
            <p><strong data-i18n="eventLocation">Location:</strong> ${e.location}</p>
          </div>
        `;
      });
    } else {
      html += `<p data-i18n="noEvents">No tampering events recorded for this device.</p>`;
    }
    container.innerHTML = html;
  } else {
    container.innerHTML = `<h2 data-i18n="noData">No data found for Device ID: ${deviceId || "N/A"}</h2>`;
  }
</script>
</body>
</html>
